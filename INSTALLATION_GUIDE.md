# Chrome扩展安装指南

## 🚨 解决图标加载错误

如果您遇到以下错误：
```
错误Couldn't load icon dist/icon_WH_16x16px.png specified in action.
```

这是因为Chrome扩展缓存了旧的manifest.json文件。请按照以下步骤完全重新安装扩展。

## 📋 完整安装步骤

### 1. 构建项目
```bash
npm run build
```

### 2. 完全卸载旧扩展（重要！）
1. 打开Chrome浏览器
2. 访问 `chrome://extensions/`
3. 找到"SelfBookmark"扩展
4. 点击"移除"按钮完全删除扩展
5. **重启Chrome浏览器**（这一步很重要！）

### 3. 重新安装扩展
1. 重新打开Chrome浏览器
2. 访问 `chrome://extensions/`
3. 确保右上角的"开发者模式"已开启
4. 点击"加载已解压的扩展程序"
5. 选择项目的 `build` 文件夹（不是项目根目录！）
6. 点击"选择文件夹"

### 4. 验证安装
- 扩展应该出现在扩展列表中，没有任何错误
- 工具栏中应该显示扩展图标
- 点击图标应该能打开popup页面

## 🔍 故障排除

### 问题1：仍然显示图标错误
**解决方案**：
1. 确保完全删除了旧扩展
2. 重启Chrome浏览器
3. 清除Chrome缓存：设置 → 隐私设置和安全性 → 清除浏览数据
4. 重新安装扩展

### 问题2：扩展功能不工作
**解决方案**：
1. 检查控制台错误：右键扩展图标 → 检查弹出式窗口
2. 确保选择的是 `build` 文件夹，不是项目根目录
3. 确保 `build` 文件夹包含以下文件：
   - manifest.json
   - popup.html
   - options.html
   - icon_WH_*.png 文件
   - 各种 .js 文件

### 问题3：权限错误
**解决方案**：
1. 检查manifest.json中的权限设置
2. 重新安装扩展时注意权限提示
3. 确保允许扩展访问书签和存储

## 📁 正确的文件结构

安装时，`build` 文件夹应该包含：
```
build/
├── manifest.json          # 扩展配置文件
├── popup.html             # 弹出页面
├── options.html           # 选项页面
├── popup.js               # 弹出页面脚本
├── options.js             # 选项页面脚本
├── react.js               # React库
├── 788.js                 # 共享代码
├── icon_WH_16x16px.png    # 16x16图标
├── icon_WH_48x48px.png    # 48x48图标
├── icon_WH_128x128px.png  # 128x128图标
└── 其他.js文件            # 懒加载的组件
```

## ✅ 成功安装的标志

1. **无错误消息**：扩展列表中没有红色错误提示
2. **图标显示**：工具栏中显示扩展图标
3. **功能正常**：
   - 点击图标打开popup页面
   - popup页面显示"打开选项"按钮
   - 点击按钮能打开选项页面
   - 选项页面显示完整的React界面

## 🔄 开发模式

如果您要进行开发：
```bash
npm run dev    # 开发模式（监听文件变化）
```

每次修改代码后：
1. 等待构建完成
2. 在扩展管理页面点击扩展的"刷新"按钮
3. 重新测试功能

## 📞 需要帮助？

如果按照以上步骤仍然遇到问题，请提供：
1. Chrome版本号
2. 具体的错误消息
3. 控制台日志（F12 → Console）
4. build文件夹的文件列表
