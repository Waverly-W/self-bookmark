/*! For license information please see 80.js.LICENSE.txt */
"use strict";(self.webpackChunkbookmark002=self.webpackChunkbookmark002||[]).push([[80],{80:(e,t,r)=>{r.r(t),r.d(t,{default:()=>u});var n=r(540);function o(e){return o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o(e)}function a(){var e,t,r="function"==typeof Symbol?Symbol:{},n=r.iterator||"@@iterator",o=r.toStringTag||"@@toStringTag";function c(r,n,o,a){var c=n&&n.prototype instanceof s?n:s,u=Object.create(c.prototype);return l(u,"_invoke",function(r,n,o){var a,l,c,s=0,u=o||[],m=!1,p={p:0,n:0,v:e,a:f,f:f.bind(e,4),d:function(t,r){return a=t,l=0,c=e,p.n=r,i}};function f(r,n){for(l=r,c=n,t=0;!m&&s&&!o&&t<u.length;t++){var o,a=u[t],f=p.p,d=a[2];r>3?(o=d===n)&&(c=a[(l=a[4])?5:(l=3,3)],a[4]=a[5]=e):a[0]<=f&&((o=r<2&&f<a[1])?(l=0,p.v=n,p.n=a[1]):f<d&&(o=r<3||a[0]>n||n>d)&&(a[4]=r,a[5]=n,p.n=d,l=0))}if(o||r>1)return i;throw m=!0,n}return function(o,u,d){if(s>1)throw TypeError("Generator is already running");for(m&&1===u&&f(u,d),l=u,c=d;(t=l<2?e:c)||!m;){a||(l?l<3?(l>1&&(p.n=-1),f(l,c)):p.n=c:p.v=c);try{if(s=2,a){if(l||(o="next"),t=a[o]){if(!(t=t.call(a,c)))throw TypeError("iterator result is not an object");if(!t.done)return t;c=t.value,l<2&&(l=0)}else 1===l&&(t=a.return)&&t.call(a),l<2&&(c=TypeError("The iterator does not provide a '"+o+"' method"),l=1);a=e}else if((t=(m=p.n<0)?c:r.call(n,p))!==i)break}catch(t){a=e,l=1,c=t}finally{s=1}}return{value:t,done:m}}}(r,o,a),!0),u}var i={};function s(){}function u(){}function m(){}t=Object.getPrototypeOf;var p=[][n]?t(t([][n]())):(l(t={},n,function(){return this}),t),f=m.prototype=s.prototype=Object.create(p);function d(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,m):(e.__proto__=m,l(e,o,"GeneratorFunction")),e.prototype=Object.create(f),e}return u.prototype=m,l(f,"constructor",m),l(m,"constructor",u),u.displayName="GeneratorFunction",l(m,o,"GeneratorFunction"),l(f),l(f,o,"Generator"),l(f,n,function(){return this}),l(f,"toString",function(){return"[object Generator]"}),(a=function(){return{w:c,m:d}})()}function l(e,t,r,n){var o=Object.defineProperty;try{o({},"",{})}catch(e){o=0}l=function(e,t,r,n){function a(t,r){l(e,t,function(e){return this._invoke(t,r,e)})}t?o?o(e,t,{value:r,enumerable:!n,configurable:!n,writable:!n}):e[t]=r:(a("next",0),a("throw",1),a("return",2))},l(e,t,r,n)}function c(e,t,r,n,o,a,l){try{var c=e[a](l),i=c.value}catch(e){return void r(e)}c.done?t(i):Promise.resolve(i).then(n,o)}function i(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,a,l,c=[],i=!0,s=!1;try{if(a=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;i=!1}else for(;!(i=(n=a.call(r)).done)&&(c.push(n.value),c.length!==t);i=!0);}catch(e){s=!0,o=e}finally{try{if(!i&&null!=r.return&&(l=r.return(),Object(l)!==l))return}finally{if(s)throw o}}return c}}(e,t)||function(e,t){if(e){if("string"==typeof e)return s(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?s(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function s(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}const u=function(e){var t=e.config,r=e.onChange,l=i((0,n.useState)(!1),2),s=l[0],u=l[1],m=i((0,n.useState)(!1),2),p=m[0],f=m[1],d=i((0,n.useState)(null),2),v=d[0],y=d[1],h=function(e,t){var n,a,l;r((n={},l=t,(a=function(e){var t=function(e){if("object"!=o(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=o(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==o(t)?t:t+""}(a=e))in n?Object.defineProperty(n,a,{value:l,enumerable:!0,configurable:!0,writable:!0}):n[a]=l,n))},b=function(){var e,r=(e=a().m(function e(){var r,n,o,l,c,i;return a().w(function(e){for(;;)switch(e.p=e.n){case 0:if(f(!0),y(null),e.p=1,r=t.apiUrl||"https://api.openai.com/v1",n="custom"===t.model?t.customModel:t.model,t.apiKey){e.n=2;break}throw new Error("请先输入API Key");case 2:if(n){e.n=3;break}throw new Error("请选择或输入模型名称");case 3:return e.n=4,fetch("".concat(r,"/chat/completions"),{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(t.apiKey)},body:JSON.stringify({model:n,messages:[{role:"user",content:"Hello"}],max_tokens:5})});case 4:if(!(o=e.v).ok){e.n=5;break}y({success:!0,message:"连接成功"}),e.n=7;break;case 5:return e.n=6,o.json();case 6:throw c=e.v,new Error((null===(l=c.error)||void 0===l?void 0:l.message)||"连接失败");case 7:e.n=9;break;case 8:e.p=8,i=e.v,y({success:!1,message:i.message});case 9:return e.p=9,f(!1),e.f(9);case 10:return e.a(2)}},e,null,[[1,8,9,10]])}),function(){var t=this,r=arguments;return new Promise(function(n,o){var a=e.apply(t,r);function l(e){c(a,n,o,l,i,"next",e)}function i(e){c(a,n,o,l,i,"throw",e)}l(void 0)})});return function(){return r.apply(this,arguments)}}();return n.createElement("div",{className:"mb-6"},n.createElement("h3",{className:"text-sm font-medium text-gray-700 mb-2"},"OpenAI API 设置"),n.createElement("div",{className:"border rounded-lg p-4 bg-white space-y-4"},n.createElement("div",null,n.createElement("label",{htmlFor:"openaiApiKey",className:"block text-sm font-medium text-gray-700 mb-1"},"API Key"),n.createElement("div",{className:"relative"},n.createElement("input",{type:s?"text":"password",id:"openaiApiKey",value:t.apiKey||"",onChange:function(e){return h("apiKey",e.target.value)},className:"input-field pr-10",placeholder:"输入你的 OpenAI API Key"}),n.createElement("button",{type:"button",onClick:function(){return u(!s)},className:"absolute inset-y-0 right-0 px-3 flex items-center text-gray-500 hover:text-gray-700"},n.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},n.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),n.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"}))))),n.createElement("div",null,n.createElement("label",{htmlFor:"openaiApiUrl",className:"block text-sm font-medium text-gray-700 mb-1"},"API URL"),n.createElement("input",{type:"url",id:"openaiApiUrl",value:t.apiUrl||"https://api.openai.com/v1",onChange:function(e){return h("apiUrl",e.target.value)},className:"input-field",placeholder:"https://api.openai.com/v1"})),n.createElement("div",null,n.createElement("label",{htmlFor:"openaiModel",className:"block text-sm font-medium text-gray-700 mb-1"},"模型选择"),n.createElement("div",{className:"space-y-2"},n.createElement("div",{className:"relative"},n.createElement("select",{id:"openaiModel",value:t.model||"gpt-4",onChange:function(e){var t=e.target.value;h("model",t),"custom"===t||h("customModel","")},className:"select-field appearance-none"},n.createElement("option",{value:"gpt-4"},"GPT-4"),n.createElement("option",{value:"gpt-4-turbo-preview"},"GPT-4 Turbo"),n.createElement("option",{value:"gpt-3.5-turbo"},"GPT-3.5 Turbo"),n.createElement("option",{value:"custom"},"自定义模型")),n.createElement("div",{className:"pointer-events-none absolute inset-y-0 right-0 flex items-center px-2 text-gray-500"},n.createElement("svg",{className:"h-5 w-5",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor"},n.createElement("path",{fillRule:"evenodd",d:"M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z",clipRule:"evenodd"})))),"custom"===t.model&&n.createElement("div",null,n.createElement("input",{type:"text",value:t.customModel||"",onChange:function(e){return h("customModel",e.target.value)},className:"input-field",placeholder:"输入自定义模型名称，例如: gpt-4-32k"})))),n.createElement("div",{className:"pt-2"},n.createElement("div",{className:"flex items-center space-x-2"},n.createElement("button",{onClick:b,disabled:p,className:"btn-secondary text-sm flex items-center space-x-1"},p?n.createElement("svg",{className:"animate-spin h-4 w-4",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},n.createElement("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),n.createElement("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})):n.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},n.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M13 10V3L4 14h7v7l9-11h-7z"})),n.createElement("span",null,p?"测试中...":"测试连接")),v&&n.createElement("div",{className:"flex items-center space-x-1"},v.success?n.createElement("svg",{className:"h-4 w-4 text-green-500",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},n.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M5 13l4 4L19 7"})):n.createElement("svg",{className:"h-4 w-4 text-red-500",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},n.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M6 18L18 6M6 6l12 12"})),n.createElement("span",{className:"text-sm ".concat(v.success?"text-green-600":"text-red-600")},v.message))))))}}}]);